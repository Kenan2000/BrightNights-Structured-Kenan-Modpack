[
  {
    "type": "npc",
    "id": "DKZ_MAQUIS_BIONIC_DOCTOR",
    "class": "NC_MAQUIS_BIONIC_DOCTOR",
    "attitude": 0,
    "mission": 7,
    "chat": "TALK_MAQUIS_BIONIC_DOCTOR_ROOT",
    "mission_offered": "DKZ_MAQUIS_BIONIC_DOCTOR_MISSION_1",
    "faction": "maquis"
  },
  {
    "type": "npc_class",
    "id": "NC_MAQUIS_BIONIC_DOCTOR",
    "name": { "str": "Maquis-Bionic Doctor" },
    "job_description": "I'm here to install and maintain cybernetic devices.",
    "common": false,
    "traits": [
      { "trait": "PROF_AUTODOC", "prob": 100 },
      { "group": "DKZ_starting_traits" },
      { "group": "Appearance_demographics" },
      { "trait": "WAKEFUL", "prob": 75 },
      { "trait": "GOODHEARING", "prob": 75 },
      { "trait": "ROBUST", "prob": 30 },
      { "trait": "PRETTY", "prob": 5 },
      { "trait": "ANTIJUNK", "prob": 80 },
      { "trait": "NAUSEA", "prob": 10 },
      { "trait": "HUNGER", "prob": 20 },
      { "trait": "DEX_ALPHA", "prob": 5 },
      { "trait": "INT_ALPHA", "prob": 95 },
      { "trait": "PER_ALPHA", "prob": 10 }
    ],
    "skills": [
      { "skill": "ALL", "level": { "sum": [ { "dice": [ 3, 2 ] }, { "constant": -4 } ] } },
      { "skill": "computer", "bonus": { "rng": [ 4, 6 ] } },
      { "skill": "fabrication", "bonus": { "rng": [ 1, 3 ] } },
      { "skill": "mechanics", "bonus": { "rng": [ 1, 3 ] } },
      { "skill": "electronics", "bonus": { "rng": [ 2, 4 ] } },
      { "skill": "firstaid", "bonus": { "rng": [ 4, 6 ] } },
      { "skill": "cooking", "bonus": { "rng": [ 2, 5 ] } },
      { "skill": "survival", "bonus": { "rng": [ 0, 1 ] } },
      { "skill": "dodge", "bonus": { "rng": [ 2, 3 ] } },
      { "skill": "melee", "bonus": { "rng": [ 1, 2 ] } },
      { "skill": "unarmed", "bonus": { "rng": [ 1, 2 ] } },
      { "skill": "bashing", "bonus": { "rng": [ 1, 2 ] } },
      { "skill": "gun", "bonus": { "rng": [ 1, 2 ] } },
      { "skill": "pistol", "bonus": { "rng": [ 1, 2 ] } },
      { "skill": "rifle", "bonus": { "rng": [ 0, 2 ] } }
    ],
    "bionics": [
      { "id": "bio_syringe", "chance": 100 },
      { "id": "bio_metabolics", "chance": 100 },
      { "id": "bio_surgical_razor", "chance": 100 },
      { "id": "bio_tools", "chance": 100 },
      { "id": "bio_power_storage_mkII", "chance": 100 },
      { "id": "bio_power_storage_mkII", "chance": 10 }
    ],
    "worn_override": "NC_MAQUIS_BIONIC_DOCTOR_worn",
    "weapon_override": "NC_MAQUIS_BIONIC_DOCTOR_weapon",
    "carry_override": "NC_MAQUIS_BIONIC_DOCTOR_carry",
    "bonus_str": { "rng": [ -1, 3 ] },
    "bonus_dex": { "rng": [ -1, 3 ] },
    "bonus_int": { "rng": [ 3, 5 ] },
    "bonus_per": { "rng": [ -1, 2 ] }
  },
  {
    "id": "NC_MAQUIS_BIONIC_DOCTOR_worn",
    "type": "item_group",
    "subtype": "collection",
    "entries": [
      {
        "distribution": [ { "item": "boxer_shorts", "prob": 50 }, { "item": "briefs", "prob": 50 }, { "item": "boxer_briefs", "prob": 50 } ]
      },
      { "distribution": [ { "item": "socks", "prob": 50 }, { "item": "socks_ankle", "prob": 50 } ] },
      {
        "distribution": [
          { "item": "jeans", "prob": 10 },
          { "item": "pants", "prob": 10 },
          { "item": "pants_leather", "prob": 20 },
          { "item": "pants_cargo", "prob": 20 },
          { "item": "technician_pants_gray", "prob": 60 },
          { "item": "pants_army", "prob": 50 },
          { "item": "bunker_pants", "prob": 20 }
        ]
      },
      {
        "distribution": [ { "item": "tshirt", "prob": 80 }, { "item": "polo_shirt", "prob": 20 }, { "item": "tank_top", "prob": 20 } ]
      },
      {
        "distribution": [
          { "item": "null", "prob": 20 },
          { "item": "hoodie", "prob": 20 },
          { "item": "jacket_light", "prob": 20 },
          { "item": "jacket_leather", "prob": 20 },
          { "item": "jacket_flannel", "prob": 20 },
          { "item": "trenchcoat", "prob": 20 },
          { "item": "jacket_jean", "prob": 20 },
          { "item": "jacket_army", "prob": 20 },
          { "item": "bunker_coat", "prob": 10 },
          { "item": "jacket_windbreaker", "prob": 10 },
          { "item": "kevlar", "prob": 5 },
          { "item": "trenchcoat", "prob": 20 },
          { "item": "ballistic_vest_esapi", "prob": 30 }
        ]
      },
      {
        "distribution": [
          { "item": "bandana_head", "prob": 80 },
          { "item": "hat_ball", "prob": 10 },
          { "item": "hat_hard", "prob": 10 },
          { "item": "helmet_bike", "prob": 10 },
          { "item": "helmet_riot", "prob": 10 },
          { "item": "helmet_motor", "prob": 10 },
          { "item": "hat_hunting", "prob": 10 },
          { "item": "hat_hunting", "prob": 10 }
        ]
      },
      {
        "distribution": [
          { "item": "tshirt", "prob": 20 },
          { "item": "polo_shirt", "prob": 20 },
          { "item": "dress_shirt", "prob": 20 },
          { "item": "tank_top", "prob": 20 }
        ]
      },
      {
        "distribution": [ { "item": "gloves_leather", "prob": 50 }, { "item": "gloves_fingerless", "prob": 50 }, { "item": "null", "prob": 5 } ]
      },
      {
        "distribution": [ { "item": "keffiyeh", "prob": 50 }, { "item": "bandana", "prob": 50 }, { "item": "null", "prob": 5 } ]
      },
      {
        "distribution": [ { "item": "backpack", "prob": 50 }, { "item": "backpack_leather", "prob": 50 }, { "item": "null", "prob": 5 } ]
      },
	  { "item": "coat_lab", "prob": 100 }
    ]
  },
  {
    "type": "item_group",
    "id": "NC_MAQUIS_BIONIC_DOCTOR_weapon",
    "subtype": "distribution",
    "entries": [
      { "item": "knife_butcher", "prob": 20 },
      { "item": "hatchet", "prob": 20 },
      { "item": "ax", "prob": 20 },
      { "item": "machete", "prob": 20 },
      { "item": "knife_combat", "prob": 20 },
      { "item": "hammer", "prob": 20 },
      { "item": "wrench", "prob": 20 },
      { "item": "hammer_sledge", "prob": 10 },
      { "item": "hammer_sledge_short", "prob": 10 },
      { "item": "pipe", "prob": 20 },
      { "item": "bat", "prob": 20 },
      { "item": "bat_metal", "prob": 20 },
      { "item": "crowbar", "prob": 50 }
    ]
  },
  {
    "type": "item_group",
    "id": "NC_MAQUIS_BIONIC_DOCTOR_carry",
    "subtype": "distribution",
    "entries": [
      { "group": "rad_gear", "count-min": 1, "count-max": 2, "prob": 90 },
      { "group": "fireman_gear", "count-min": 1, "count-max": 2, "prob": 90 },
      { "item": "baton", "prob": 100 }
    ]
  },
  {
    "//": "-----------------------------------------------------------------------------------------------------------------------",
    "id": "TALK_MAQUIS_BIONIC_DOCTOR_ROOT",
    "type": "talk_topic",
    "dynamic_line": {
      "u_is_wearing": "badge_marshal",
      "yes": [
        "Are you lost, marshal?",
        "Can I help you marshal?  Got any bionics that need a tune up?.",
        "Hello marshal, need any bionics installed?"
      ],
      "no": [ "Welcome…" ]
    },
    "responses": [
      {
        "text": "Lets set a combat strategy",
        "condition": { "npc_has_var": "temporal_follower", "type": "general", "context": "medical_recruit", "value": "yes" },
        "topic": "TALK_COMBAT_COMMANDS"
      },
      {
        "text": "I need medical support for an upcoming mission, interested?",
        "topic": "TALK_MAQUIS_MEDIC_RECRUIT",
        "condition": {
          "and": [
            { "u_compare_var": "maquis_recruit", "type": "counter", "context": "medical_recruit", "op": ">", "value": 0 },
            { "npc_has_trait": "DKZ_COMBAT" }
          ]
        }
      },
      { "text": "Let's trade.", "topic": "TALK_MAQUIS_BIONIC_DOCTOR_TRADE" },
      { "text": "I need some bionic work done.", "topic": "TALK_MAQUIS_BIONIC_DOCTOR_INSTALL_BIONICS" },
      { "text": "What are you doing here?", "topic": "TALK_MAQUIS_BIONIC_DOCTOR_DOING" },
      { "text": "What is upstairs?", "topic": "TALK_MAQUIS_BIONIC_DOCTOR_UPSTAIRS" },
      {
        "text": "[MISSION] I'm looking for Chad Erikson, Randy sent me.",
        "condition": {
          "and": [
            { "not": { "u_has_var": "u_met_Chad_Erikson", "type": "general", "context": "meeting", "value": "yes" } },
            { "u_has_mission": "MISSION_CHECK_UP_ON_BIG_BROTHER" }
          ]
        },
        "topic": "TALK_MAQUIS_BIONIC_DOCTOR_BIG_BROTHER"
      },
      {
        "text": "Is there anything I can do to help you out?",
        "condition": {
          "and": [
            { "not": { "npc_has_var": "Maquis_Bionic_Doctor_Mission2", "type": "general", "context": "meeting", "value": "yes" } },
            { "not": "has_many_assigned_mission" },
            { "not": "has_assigned_mission" }
          ]
        },
        "topic": "TALK_MISSION_LIST"
      },
      { "text": "About that mission…", "topic": "TALK_MISSION_INQUIRE", "condition": "has_assigned_mission" },
      { "text": "See you later.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MAQUIS_BIONIC_DOCTOR_TRADE",
    "dynamic_line": [
      "I don't have anything for sale.",
      "Then you should go find a merchant downstairs and talk to them.",
      "Dammit, I'm a doctor not a merchant."
    ],
    "responses": [
      { "text": "I have another question.", "topic": "TALK_NONE" },
      { "text": "Ok, I have to go now.", "topic": "TALK_DONE" }
    ]
  },
  {
    "//": "-----------------------------------------------------------------------------------------------------------------------",
    "id": "TALK_MAQUIS_BIONIC_DOCTOR_BIG_BROTHER",
    "type": "talk_topic",
    "dynamic_line": [
      "I'm sure that Mr. Erikson is on this floor.",
      "I just saw Mr. Erikson go into one of the roooms around here, sorry I can't help you any more than that."
    ],
    "responses": [ { "text": "Ok, Thanks.", "topic": "TALK_NONE" }, { "text": "Ok, I have to go now.", "topic": "TALK_DONE" } ]
  },
  {
    "//": "-----------------------------------------------------------------------------------------------------------------------",
    "id": "TALK_MAQUIS_BIONIC_DOCTOR_DOING",
    "type": "talk_topic",
    "dynamic_line": [ "I help people install cybernetic augmentations into their body." ],
    "responses": [
      { "text": "I need some bionic work done.", "topic": "TALK_MAQUIS_BIONIC_DOCTOR_INSTALL_BIONICS" },
      { "text": "I have another question.", "topic": "TALK_MAQUIS_BIONIC_DOCTOR_ROOT" },
      { "text": "Ok, good bye.", "topic": "TALK_DONE" }
    ]
  },
  {
    "//": "-----------------------------------------------------------------------------------------------------------------------",
    "id": "TALK_MAQUIS_BIONIC_DOCTOR_INSTALL_BIONICS",
    "type": "talk_topic",
    "dynamic_line": "I can help you install or remove bionics",
    "responses": [
      {
        "text": "I was wondering if you could install a cybernetic implant…",
        "topic": "TALK_DONE",
        "effect": "bionic_install"
      },
      { "text": "I need help removing an implant…", "topic": "TALK_DONE", "effect": "bionic_remove" }
    ]
  },
  {
    "id": "TALK_MAQUIS_BIONIC_DOCTOR_UPSTAIRS",
    "type": "talk_topic",
    "dynamic_line": [ "It's nice up here most days, although the windows allow us to see how bad the world has become." ],
    "responses": [
      { "text": "Let's trade.", "effect": "start_trade", "topic": "TALK_MAQUIS_BIONIC_DOCTOR_ROOT" },
      { "text": "Well, bye.", "topic": "TALK_DONE" }
    ]
  },
  {
    "//": "-----------------------------------------------------------------------------------------------------------------------",
    "id": "DKZ_MAQUIS_BIONIC_DOCTOR_MISSION_1",
    "type": "mission_definition",
    "name": { "str": "A new autoclave" },
    "description": "Find an autoclave.",
    "goal": "MGOAL_FIND_ITEM",
    "difficulty": 5,
    "value": 40000,
    "item": "autoclave",
    "count": 1,
    "end": {
      "effect": [
        { "u_adjust_var": "maquis_morale", "type": "counter", "context": "refugee_center", "adjustment": 2 },
        { "npc_add_var": "Maquis_Bionic_Doctor_Mission2", "type": "mission", "context": "flag", "value": "yes" }
      ]
    },
    "origins": [ "ORIGIN_SECONDARY" ],
    "followup": "DKZ_MAQUIS_BIONIC_DOCTOR_MISSION_2",
    "dialogue": {
      "describe": "I need you to find me something.",
      "offer": "I need a working autoclave to sterilize bionics before installing them.",
      "accepted": "Thank you.  This will really help out the resistance organization.",
      "rejected": "Oh well.  I'll see if I can find another supplier, thanks.",
      "advice": "A hospital might have one, or maybe a secret lab?",
      "inquire": "How is the search going?",
      "success": "Thanks.",
      "success_lie": "What good does this do us?",
      "failure": "I wonder where it all went…"
    }
  },
  {
    "//": "-----------------------------------------------------------------------------------------------------------------------",
    "id": "DKZ_MAQUIS_BIONIC_DOCTOR_MISSION_2",
    "type": "mission_definition",
    "name": { "str": "Checking for MedSoft firmware patch" },
    "description": "Find the latest MediSoft firmware patch",
    "goal": "MGOAL_FIND_ITEM",
    "difficulty": 6,
    "value": 20000,
    "item": "software_medical",
    "count": 1,
    "followup": "DKZ_MAQUIS_BIONIC_DOCTOR_MISSION_2",
    "end": {
      "effect": [
        { "u_adjust_var": "maquis_morale", "type": "counter", "context": "refugee_center", "adjustment": 1 },
        { "npc_add_var": "Maquis_Bionic_Doctor_Mission1", "type": "mission", "context": "flag", "value": "yes" }
      ]
    },
    "origins": [ "ORIGIN_SECONDARY" ],
    "dialogue": {
      "describe": "I need you to find me something.",
      "offer": "I need to check the autodoc for updates, find me the latest MediSoft firmware patch.",
      "accepted": "Thank you.  The USB drive should display the contents as 'MediSoft'.",
      "rejected": "Oh well.  I'll see if someone else can find it, thanks.",
      "advice": "The best place would probably be a goverment research lab, but then again things like this seem to end up in the trash all the time.  Just keep your eyes open for a USB drive that displays the content as 'MediSoft'.",
      "inquire": "How is the search going?",
      "success": "Thanks.",
      "success_lie": "What good does this do us?",
      "failure": "I wonder where it all went…"
    }
  }
]
